(function(){"use strict";const s={top_bar_height:2,top_bar_margin:.5,top_bar_padding:0,hex_grid_side_border:10,hex_grid_top_border:60,hex_grid_bottom_border:10,canvas_pixel_limit:8e3,hexagon_stroke_width:.1};function f(o){return Math.round(Math.sqrt(3)*o)}function m(o){return o*2}function y(o){return o/2}function l(o,e,t){const r=f(t),n=(o%2==1?r/2:0)+r/2+r*(e-1)+s.hex_grid_side_border,_=s.hex_grid_top_border+t+t*1.5*(o-1);return[n,_]}function v(o,e,t){const r=f(t),[n,_]=l(o,e,t);return[{x:n,y:_-t},{x:n+r/2,y:_-t/2},{x:n+r/2,y:_+t/2},{x:n,y:_+t},{x:n-r/2,y:_+t/2},{x:n-r/2,y:_-t/2}]}function w(o,e,t){const r=f(t),[n,_]=l(o,e,t);return[{x:n,y:_-t/1.5},{x:n+r/2.5,y:_-t/5},{x:n+r/3,y:_-t/5},{x:n+r/3,y:_+t/2},{x:n-r/3,y:_+t/2},{x:n-r/3,y:_-t/5},{x:n-r/2.5,y:_-t/5}]}function k(o){const e=new Path2D;e.moveTo(o[0].x,o[0].y);for(let t=1;t<o.length;t++)e.lineTo(o[t].x,o[t].y);return e.closePath(),e}function F(o,e){return e*(o*1.5)+s.hex_grid_top_border+o/2+s.hex_grid_bottom_border}function M(o,e){const t=f(o);return s.hex_grid_side_border*2+t/2+t*e}const c={get_short_diagonal_length:f,get_long_diagonal_length:m,get_peak_height:y,get_hexagon_points:v,get_canvas_path_2d:k,get_canvas_height:F,get_canvas_width:M,get_center_point:l,get_house_points:w},T={background_color_hexidecimal:{unset:"#FFFFFF",ocean:"#a5c6fa",mountain:"#9d9fa1",bog:"#ffe4fd",forest:"#a1e070",plains:"#ddfec3",desert:"#fae4a7",hills:"#d1d2d3",white:"#ffffff",black:"#000000",road:"#664900",red:"#a83232",disabled:"#c2c2c2"}.white,is_top_left_river:!1,is_top_right_river:!1,is_right_river:!1,is_bottom_right_river:!1,is_bottom_left_river:!1,is_left_river:!1,is_top_left_road:!1,is_top_right_road:!1,is_right_road:!1,is_bottom_right_road:!1,is_bottom_left_road:!1,is_left_road:!1,town_size:0,affinity:0,race:0};onmessage=o=>{const e=o.data.edge_length,t=o.data.num_rows,r=o.data.num_columns,n=o.data.hexagon_definitions,_=c.get_canvas_height(e,t),C=c.get_canvas_width(e,r);for(let i=1;i<=t;i++)for(let a=1;a<=t;a++){let d=!1;const P=c.get_hexagon_points(i,a,e),[p,b]=c.get_center_point(i,a,e);for(let u=0;u<n.length;u++){const h=n[u];if(h.row_number==i&&h.column_number==a){d=!0,h.corner_points=P,h.center_x=p,h.center_y=b;break}}d||n.push({row_number:i,column_number:a,corner_points:c.get_hexagon_points(i,a,e),center_x:p,center_y:b,...T})}const g=new OffscreenCanvas(C,_),x=g.getContext("2d");for(let i=0;i<n.length;i++){const a=n[i],d=c.get_canvas_path_2d(a.corner_points);x.fillStyle=a.background_color_hexidecimal,x.fill(d),x.lineWidth=s.hexagon_stroke_width,x.stroke(d)}postMessage({bitmap:g.transferToImageBitmap(),hexagon_definitions:n})}})();
